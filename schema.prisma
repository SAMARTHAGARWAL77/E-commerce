// This file is automatically generated by Keystone, do not modify it manually.
// Modify your Keystone config when you want to change this.

datasource sqlite {
  url               = env("DATABASE_URL")
  shadowDatabaseUrl = env("SHADOW_DATABASE_URL")
  provider          = "sqlite"
}

generator client {
  provider = "prisma-client-js"
}

model User {
  id        String    @id @default(cuid())
  name      String    @default("")
  email     String    @unique @default("")
  password  String
  orders    Order[]   @relation("Order_user")
  createdAt DateTime? @default(now())
  updatedAt DateTime? @default(now()) @updatedAt
}

model Product {
  id           String      @id @default(cuid())
  name         String      @default("")
  description  String      @default("")
  priceCents   Int
  currencyCode String      @default("USD")
  isActive     Boolean     @default(true)
  orderItems   OrderItem[] @relation("OrderItem_product")
  createdAt    DateTime?   @default(now())
  updatedAt    DateTime?   @default(now()) @updatedAt
}

model Order {
  id           String      @id @default(cuid())
  user         User?       @relation("Order_user", fields: [userId], references: [id])
  userId       String?     @map("user")
  status       String      @default("pending")
  currencyCode String      @default("USD")
  totalCents   Int
  orderItems   OrderItem[] @relation("OrderItem_order")
  createdAt    DateTime?   @default(now())
  updatedAt    DateTime?   @default(now()) @updatedAt

  @@index([userId])
}

model OrderItem {
  id                  String   @id @default(cuid())
  order               Order?   @relation("OrderItem_order", fields: [orderId], references: [id])
  orderId             String?  @map("order")
  product             Product? @relation("OrderItem_product", fields: [productId], references: [id])
  productId           String?  @map("product")
  productNameSnapshot String   @default("")
  unitPriceCents      Int
  quantity            Int      @default(1)
  lineTotalCents      Int

  @@index([orderId])
  @@index([productId])
}
